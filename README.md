# Graphic Tags API

Возвращает список гравфиков, удовлетворяющий переданному набору тегов

# Установка

Python 3 должен быть предварительно установлен. Затем ставим зависимости:

```bash
pip install -r requirements.txt
```

# Запуск

Все последующие команды совершаются из корневой папки проекта. Предварительно нужно указать точку входа в приложение.
```#!bash

$ export FLASK_APP=main.py

```

Сперва запустим тесты

```#!bash

$ pytest

```
Затем установим и заполним базу данных

```#!bash

$ flask init-db

```

Теперь запускаем приложение

```#!bash

$ flask run

```

Доступ осуществляется по адресу http://127.0.0.1:5000/api/v1/graph_by_tag

Проверить можно, например, вот так

```#!bash

Python console
>>> import requests
>>> r = requests.get('http://127.0.0.1:5000/api/v1/graph_by_tag', json={'tags': ['mask_11', 'ev_11']})
>>> len(r.json()), r.json()
235, ['G100001', 'G100005', 'G100006', 'G100009', 'G100012', ... , 'G100998']

```

# Что в базе данных

Наполнением базы данных можно управлять тремя параметрами, которые находятся в main.py

```#!bash
...

@app.cli.command('init-db')
@with_appcontext
def init_db_command():

    tags_series = 400
    graphics = 1000
    max_tags_per_graphic = 1000
    
    ...

```
tags_series - все теги в бд представлены в виде ev_(x), tesla_(x), mask_(x), где 0 <= x < 400. По умолчанию их всего 3 * 400 = 1200

graphics - количество графиков вида G10000(x)

max_tags_per_graphic - каждому графику присваивается случайный повторно воспроизводимый набор тегов, количество которых не превышает этот параметр
